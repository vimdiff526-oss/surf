<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­ | SEA LIFE HUB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="åˆå¿ƒè€…ã€œä¸­ç´šè€…å‘ã‘ã®ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã€‚ä½“é‡ãƒ»ãƒ¬ãƒ™ãƒ«ãƒ»æ³¢ã®æ¡ä»¶ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‹ã‚‰æ¿ã‚¿ã‚¤ãƒ—ã¨æ¨å¥¨ãƒœãƒªãƒ¥ãƒ¼ãƒ (â„“)ã‚’ææ¡ˆã—ã¾ã™ã€‚" />
  <link rel="stylesheet" href="style.css" />
  <style>
    form{ display:grid; gap:12px; max-width:680px; margin:16px auto 0; grid-template-columns:1fr 1fr; }
    form label{ display:flex; flex-direction:column; gap:6px; font-weight:600; }
    form select, form input{ padding:10px; border-radius:8px; border:none; }
    .span2{ grid-column:1/-1; }
    .result{ margin-top:20px; display:grid; gap:16px; }
    .card img{ height: 200px; }
    .hint{ opacity:.85; font-size:.92rem; }
  </style>
</head>
<body>
  <header class="site-header">
    <a href="index.html" class="logo">ğŸŒŠ SEA LIFE HUB</a>

    <!-- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ -->
    <nav class="site-nav" aria-label="Primary">
      <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
      <div class="dropdown">
        <button class="dropbtn" aria-haspopup="true" aria-expanded="false">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â–¾</button>
        <div class="dropdown-content" role="menu">
          <a href="diagnosis.html" class="is-active" role="menuitem">ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­</a>
          <a href="apparel.html" role="menuitem">ã‚¢ãƒ‘ãƒ¬ãƒ«ï¼ˆTã‚·ãƒ£ãƒ„ï¼‰</a>
          <a href="stays.html" role="menuitem">æµ·æ²¿ã„æ°‘æ³Š</a>
        </div>
      </div>
      <a href="index.html#about">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
    </nav>

    <!-- ãƒ¢ãƒã‚¤ãƒ«ï¼šãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
    <button class="hamburger" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã" aria-controls="mobileNav" aria-expanded="false">
      <span class="bar"></span>
    </button>
  </header>
  <div class="header-spacer"></div>

  <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <div class="mobile-nav-backdrop" id="backdrop"></div>
  <nav class="mobile-nav" id="mobileNav" aria-label="Mobile">
    <div class="mobile-title">ğŸŒŠ SEA LIFE HUB</div>
    <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
    <a href="diagnosis.html" class="is-active">ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­</a>
    <a href="apparel.html">ã‚¢ãƒ‘ãƒ¬ãƒ«ï¼ˆTã‚·ãƒ£ãƒ„ï¼‰</a>
    <a href="stays.html">æµ·æ²¿ã„æ°‘æ³Š</a>
    <a href="index.html#about">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
  </nav>

  <section class="overlay">
    <main class="container">
      <h1 class="section-title">ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­ï¼ˆå‚è€ƒãƒ­ã‚¸ãƒƒã‚¯ç‰ˆï¼‰</h1>
      <p class="hint">â€»ãƒ­ã‚¸ãƒƒã‚¯ã¯å¤–éƒ¨æƒ…å ±ã‚’å‚è€ƒã«**è¦ç´„ãƒ»å†æ§‹æˆ**ã—ã¦ã„ã¾ã™ã€‚æœ€çµ‚çš„ãªæ¨å¥¨ã¯ã‚ãªãŸã®åŸºæº–ã§å¾®èª¿æ•´ã§ãã¾ã™ã€‚</p>

      <form id="surfForm">
        <label>
          ä½“é‡ï¼ˆkgï¼‰
          <input id="weight" type="number" min="35" max="120" step="1" placeholder="ä¾‹ï¼‰68" required />
        </label>
        <label>
          ãƒ¬ãƒ™ãƒ«
          <select id="level">
            <option value="beginner">åˆå¿ƒè€…</option>
            <option value="intermediate">ä¸­ç´š</option>
            <option value="advanced">ä¸Šç´š</option>
          </select>
        </label>

        <label>
          ã‚ˆãè¡Œãæ³¢ã‚µã‚¤ã‚º
          <select id="wave">
            <option value="small">å°æ³¢ï¼ˆè†ã€œè…¹ï¼‰</option>
            <option value="mid">ãƒŸãƒ‰ãƒ«ï¼ˆè…°ã€œèƒ¸ï¼‰</option>
            <option value="solid">ã‚µã‚¤ã‚ºã‚ã‚Šï¼ˆè‚©ã€œé ­ä»¥ä¸Šï¼‰</option>
          </select>
        </label>
        <label>
          ç›®æŒ‡ã™ã‚¹ã‚¿ã‚¤ãƒ«
          <select id="style">
            <option value="easy">ã¾ãšã¯æ¥½ã«ãŸãã•ã‚“ä¹—ã‚ŠãŸã„</option>
            <option value="maneuver">ã‚¿ãƒ¼ãƒ³ã‚„æŠ€ã‚’ç£¨ããŸã„</option>
            <option value="cruise">ã‚†ã£ãŸã‚Šã‚¯ãƒ«ãƒ¼ã‚ºã—ãŸã„</option>
          </select>
        </label>

        <label class="span2">
          ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹/ãƒ‘ãƒ‰ãƒ«ä½“åŠ›ã®è‡ªå·±è©•ä¾¡
          <select id="fitness">
            <option value="low">ã‚„ã‚„å¼±ã‚ï¼ˆä½“åŠ›ã«è‡ªä¿¡ãªã—ï¼‰</option>
            <option value="mid" selected>ãµã¤ã†</option>
            <option value="high">å¼·ã‚ï¼ˆä½“åŠ›/æ³³åŠ›ã«è‡ªä¿¡ã‚ã‚Šï¼‰</option>
          </select>
        </label>

        <button class="btn primary span2" type="button" onclick="diagnose()">è¨ºæ–­ã™ã‚‹</button>
      </form>

      <div id="result" class="result"></div>
    </main>
  </section>

  <footer class="site-footer">
    <p>Â© <span id="year"></span> SEA LIFE HUB</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    /* ===== è¨ºæ–­ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå‚è€ƒã‚’è¦ç´„ã—è‡ªä½œã—ãŸã‚‚ã®ï¼‰ =====
       æ¨å¥¨ãƒœãƒªãƒ¥ãƒ¼ãƒ  = weight * factor
       factorã¯ãƒ¬ãƒ™ãƒ«/ä½“åŠ›ç›®å®‰ã§ 0.50 / 0.45 / 0.40 ã‚’åŸºæº–ã«å¾®èª¿æ•´ã€‚
       æ¿ã‚¿ã‚¤ãƒ—ã¯ ãƒ¬ãƒ™ãƒ«ãƒ»æ³¢ã‚µã‚¤ã‚ºãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‹ã‚‰æ¨å®šã€‚
    */

    function calcVolume(weight, level, fitness){
      // åŸºæº–ä¿‚æ•°
      let base = 0.45; // ä¸­é–“
      if(level === 'beginner') base = 0.50;
      if(level === 'advanced') base = 0.40;

      // ä½“åŠ›ã§å¾®èª¿æ•´ï¼ˆÂ±0.03ï¼‰
      if(fitness === 'low') base += 0.03;
      if(fitness === 'high') base -= 0.03;

      const liters = Math.round(weight * base * 10)/10; // 0.1åˆ»ã¿
      // Â±10%ã®ãƒ¬ãƒ³ã‚¸ã‚‚ä½µè¨˜
      const low = Math.round(liters * 0.9 * 10)/10;
      const high = Math.round(liters * 1.1 * 10)/10;
      return { liters, range:[low, high], factor: base };
    }

    function pickBoardType(level, wave, style){
      // ã‚·ãƒ³ãƒ—ãƒ«ãªåˆ†å²ï¼ˆã‚ãªãŸã®è€ƒãˆã§ä¸Šæ›¸ãæ­“è¿ï¼‰
      if(level === 'beginner'){
        if(style === 'maneuver' && wave !== 'small') return {type:'ãƒŸãƒƒãƒ‰ãƒ¬ãƒ³ã‚°ã‚¹', why:'å®‰å®šã¨æ“ä½œæ€§ã‚’ä¸¡ç«‹ã—ã¤ã¤ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—'};
        if(style === 'cruise') return {type:'ãƒ­ãƒ³ã‚°/ãƒŸãƒƒãƒ‰', why:'ãƒ†ã‚¤ã‚¯ã‚ªãƒ•ãŒæ—©ãã€ã‚¯ãƒ«ãƒ¼ã‚ºã‚’æ¥½ã—ã¿ã‚„ã™ã„'};
        return {type:'ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ‰/ãƒ•ã‚¡ãƒ³', why:'å®‰å®šï¼†ãƒ‘ãƒ‰ãƒ«ã—ã‚„ã™ãã€ä¹—ã‚Œã‚‹æœ¬æ•°ã‚’å¢—ã‚„ã—ã‚„ã™ã„'};
      }
      if(level === 'intermediate'){
        if(style === 'maneuver'){
          return (wave === 'small') ? {type:'ãƒ•ã‚£ãƒƒã‚·ãƒ¥/ãƒ„ã‚¤ãƒ³å¯„ã‚Šã‚·ãƒ§ãƒ¼ãƒˆ', why:'å°æ³¢ã§ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’å¾—ã‚„ã™ã„'} :
                                      {type:'ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆ', why:'æŠ€ã¨èµ°ã‚Šã®ãƒãƒ©ãƒ³ã‚¹'};
        }
        if(style === 'cruise') return {type:'ãƒŸãƒƒãƒ‰/ãƒ­ãƒ³ã‚°', why:'ã‚†ã£ãŸã‚Šä¹—ã‚‹æœ¬æ•°ã¨æ„Ÿè¦šã‚’å„ªå…ˆ'};
        return {type:'ãƒŸãƒƒãƒ‰/ã‚·ãƒ§ãƒ¼ãƒˆ(ã‚„ã‚„ãƒœãƒªãƒ¥ãƒ¼ãƒ å¤šã‚)', why:'å–ã‚Šå›ã—ã¨å®‰å®šã®ãƒãƒ©ãƒ³ã‚¹'};
      }
      // advanced
      if(style === 'cruise') return {type:'ãƒ­ãƒ³ã‚°', why:'ãƒ©ã‚¤ãƒ³å–ã‚Šã‚’å¤§ããã€ã‚¯ãƒ«ãƒ¼ã‚ºé‡è¦–'};
      return (wave === 'small') ? {type:'ãƒã‚¤ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚·ãƒ§ãƒ¼ãƒˆ/ãƒ•ã‚£ãƒƒã‚·ãƒ¥', why:'å°æ³¢ã§ãƒ‰ãƒ©ã‚¤ãƒ–æ„Ÿã‚’ç¢ºä¿'} :
                                  {type:'HPã‚·ãƒ§ãƒ¼ãƒˆ', why:'æ“ä½œæ€§ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–'};
    }

    function suggestFins(type, style){
      // ã–ã£ãã‚Šã®æ¨å¥¨ï¼ˆå‚è€ƒã®ä¸€èˆ¬è«–ã‚’è¸ã¾ãˆãŸå‚¾å‘ï¼‰
      if(type.includes('ãƒ­ãƒ³ã‚°')) return {fins:'ã‚·ãƒ³ã‚°ãƒ«ä¸­å¿ƒï¼ˆ2+1ã‚‚å¯ï¼‰', note:'ç›´é€²å®‰å®šã¨å¤§ãã„ãƒ©ã‚¤ãƒ³'};
      if(type.includes('ãƒ•ã‚£ãƒƒã‚·ãƒ¥') || style==='maneuver') return {fins:'ãƒ„ã‚¤ãƒ³ or ã‚¯ãƒ¯ãƒƒãƒ‰', note:'å›è»¢æ€§oråŠ é€Ÿã‚’é‡è¦–'};
      if(type.includes('ã‚½ãƒ•ãƒˆ') || type.includes('ãƒ•ã‚¡ãƒ³') || type.includes('ãƒŸãƒƒãƒ‰')) return {fins:'ãƒˆãƒ©ã‚¤', note:'æ±ç”¨ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚„ã™ã„'};
      return {fins:'ãƒˆãƒ©ã‚¤', note:'æœ€ã‚‚ãƒãƒ”ãƒ¥ãƒ©ãƒ¼'};
    }

    function diagnose(){
      const weight = Number(document.getElementById('weight').value || 0);
      const level = document.getElementById('level').value;
      const wave = document.getElementById('wave').value;
      const style = document.getElementById('style').value;
      const fitness = document.getElementById('fitness').value;

      if(!weight || weight < 35){
        alert('ä½“é‡(kg)ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return;
      }

      const vol = calcVolume(weight, level, fitness);
      const board = pickBoardType(level, wave, style);
      const fins = suggestFins(board.type, style);

      const img = (board.type.includes('ãƒ­ãƒ³ã‚°')) ? 'images/stays.jpg'
                : (board.type.includes('ãƒŸãƒƒãƒ‰')) ? 'images/diagnosis.jpg'
                : 'images/apparel.jpg';

      const html = `
        <article class="card">
          <img src="${img}" alt="${board.type}">
          <div class="card-body">
            <h3>${board.type}</h3>
            <p>${board.why}</p>
            <p><strong>æ¨å¥¨ãƒœãƒªãƒ¥ãƒ¼ãƒ (ç›®å®‰)ï¼š</strong>${vol.liters}â„“ï¼ˆç´„${vol.range[0]}ã€œ${vol.range[1]}â„“ï¼‰</p>
            <p class="hint">â€»ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯ç›®å®‰ã§ã™ã€‚æµ®åŠ›ã®å¥½ã¿ãƒ»ãƒ‘ãƒ‰ãƒ«åŠ›ãƒ»ç€ç”¨ã‚¦ã‚§ãƒƒãƒˆãƒ»æ³¢ã®åŠ›ã§å‰å¾Œã—ã¾ã™ã€‚</p>
            <p><strong>æ¨å¥¨ãƒ•ã‚£ãƒ³æ§‹æˆï¼š</strong>${fins.fins}ï¼ˆ${fins.note}ï¼‰</p>
            <div class="cta-row">
              <a class="btn link" target="_blank" href="https://www.amazon.co.jp/s?k=ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰+${encodeURIComponent(board.type)}">Amazonã§æ¢ã™</a>
              <a class="btn link" target="_blank" href="https://search.rakuten.co.jp/search/mall/${encodeURIComponent(board.type)}">æ¥½å¤©ã§æ¢ã™</a>
            </div>
          </div>
        </article>
      `;
      document.getElementById('result').innerHTML = html;
    }

    /* ===== å…±é€šï¼šãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼&ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ ===== */
    (function(){
      const body = document.body;
      const burger = document.querySelector('.hamburger');
      const mobileNav = document.getElementById('mobileNav');
      const backdrop = document.getElementById('backdrop');
      const deskDropdown = document.querySelector('.dropdown');
      const deskBtn = deskDropdown?.querySelector('.dropbtn');

      const closeMobile = () => { body.classList.remove('nav-open'); burger?.setAttribute('aria-expanded','false'); };
      burger?.addEventListener('click', (e) => {
        e.stopPropagation();
        const willOpen = !body.classList.contains('nav-open');
        document.querySelectorAll('.dropdown.open').forEach(d => d.classList.remove('open'));
        if (willOpen) { body.classList.add('nav-open'); burger.setAttribute('aria-expanded','true'); }
        else { closeMobile(); }
      });
      backdrop?.addEventListener('click', closeMobile);
      mobileNav?.addEventListener('click', (e) => { if (e.target.tagName === 'A') closeMobile(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMobile(); });

      if (deskDropdown && deskBtn) {
        const closeAll = () => deskDropdown.classList.remove('open');
        deskBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const willOpen = !deskDropdown.classList.contains('open');
          document.querySelectorAll('.dropdown.open').forEach(d => d.classList.remove('open'));
          if (willOpen) deskDropdown.classList.add('open'); else closeAll();
        });
        document.addEventListener('click', (e) => { if (!deskDropdown.contains(e.target)) deskDropdown.classList.remove('open'); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') deskDropdown.classList.remove('open'); });
      }
    })();
  </script>
</body>
</html>
