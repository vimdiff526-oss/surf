<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>サーフボード診断 | SEA LIFE HUB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="初心者〜中級者向けのサーフボード診断ツール。" />
  <link rel="stylesheet" href="style.css" />
  <style>
    form{ display:flex; flex-direction:column; gap:12px; max-width:520px; margin: 16px auto 0; }
    select, input{ padding:10px; border-radius:8px; border:none; }
    .result{ margin-top: 20px; display:grid; gap: 16px; }
    .card img{ height: 200px; }
  </style>
</head>
<body>
  <header class="site-header">
    <a href="index.html" class="logo">🌊 SEA LIFE HUB</a>

    <nav class="site-nav" aria-label="Primary">
      <a href="index.html">ホーム</a>
      <div class="dropdown">
        <button class="dropbtn" aria-haspopup="true" aria-expanded="false">メニュー ▾</button>
        <div class="dropdown-content" role="menu">
          <a href="diagnosis.html" class="is-active" role="menuitem">サーフボード診断</a>
          <a href="apparel.html" role="menuitem">アパレル（Tシャツ）</a>
          <a href="stays.html" role="menuitem">海沿い民泊</a>
        </div>
      </div>
      <a href="index.html#about">このサイトについて</a>
    </nav>

    <button class="hamburger" aria-label="メニューを開く" aria-controls="mobileNav" aria-expanded="false">
      <span class="bar"></span>
    </button>
  </header>
  <div class="header-spacer"></div>

  <div class="mobile-nav-backdrop" id="backdrop"></div>
  <nav class="mobile-nav" id="mobileNav" aria-label="Mobile">
    <div class="mobile-title">🌊 SEA LIFE HUB</div>
    <a href="index.html">ホーム</a>
    <a href="diagnosis.html" class="is-active">サーフボード診断</a>
    <a href="apparel.html">アパレル（Tシャツ）</a>
    <a href="stays.html">海沿い民泊</a>
    <a href="index.html#about">このサイトについて</a>
  </nav>

  <section class="overlay">
    <main class="container">
      <h1 class="section-title">サーフボード診断</h1>
      <p>あなたの経験・体格・好みから、おすすめのボードタイプを提案します。</p>

      <form id="surfForm">
        <label>サーフィン歴
          <select id="experience">
            <option value="beginner">初心者（〜1年）</option>
            <option value="intermediate">中級（1〜3年）</option>
            <option value="advanced">上級（3年以上）</option>
          </select>
        </label>
        <label>身長
          <select id="height">
            <option value="short">〜160cm</option>
            <option value="medium">160〜175cm</option>
            <option value="tall">175cm以上</option>
          </select>
        </label>
        <button class="btn primary" type="button" onclick="diagnose()">診断する</button>
      </form>

      <div id="result" class="result"></div>
    </main>
  </section>

  <footer class="site-footer">
    <p>© <span id="year"></span> SEA LIFE HUB</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function diagnose(){
      const exp = document.getElementById('experience').value;
      const height = document.getElementById('height').value;
      let title = "ソフトボード / ファンボード";
      let desc  = "安定感があり、初心者でも安心。";
      let img   = "images/diagnosis.jpg";
      let amazon= "https://www.amazon.co.jp/s?k=サーフィン+ソフトボード";
      let rakuten="https://search.rakuten.co.jp/search/mall/サーフィン+ソフトボード/";
      if(exp === 'intermediate'){
        title = (height === 'tall') ? "ミッドレングス" : "ショートボード（オールラウンド）";
        desc  = (height === 'tall') ? "扱いやすさと機動性を両立。体格が大きめでも◎" : "ステップアップに最適。";
        amazon= "https://www.amazon.co.jp/s?k=サーフィン+ショートボード";
        rakuten="https://search.rakuten.co.jp/search/mall/ショートボード+サーフィン/";
      }else if(exp === 'advanced'){
        title = "ハイパフォーマンスショートボード";
        desc  = "技を磨く一本。モデルは波質や好みで選択を。";
        amazon= "https://www.amazon.co.jp/s?k=アルメリック+サーフボード";
        rakuten="https://search.rakuten.co.jp/search/mall/アルメリック+サーフボード/";
      }
      const html = `
        <article class="card">
          <img src="${img}" alt="${title}">
          <div class="card-body">
            <h3>${title}</h3>
            <p>${desc}</p>
            <div class="cta-row">
              <a class="btn link" target="_blank" href="${amazon}">Amazonで探す</a>
              <a class="btn link" target="_blank" href="${rakuten}">楽天で探す</a>
            </div>
          </div>
        </article>
      `;
      document.getElementById('result').innerHTML = html;
    }

    /* 共通JS（モバイルメニュー & デスクトップドロップダウン） */
    (function(){
      const body = document.body;
      const burger = document.querySelector('.hamburger');
      const mobileNav = document.getElementById('mobileNav');
      const backdrop = document.getElementById('backdrop');
      const deskDropdown = document.querySelector('.dropdown');
      const deskBtn = deskDropdown?.querySelector('.dropbtn');

      const closeMobile = () => { body.classList.remove('nav-open'); burger?.setAttribute('aria-expanded','false'); };
      burger?.addEventListener('click', (e) => {
        e.stopPropagation();
        const willOpen = !body.classList.contains('nav-open');
        document.querySelectorAll('.dropdown.open').forEach(d => d.classList.remove('open'));
        if (willOpen) { body.classList.add('nav-open'); burger.setAttribute('aria-expanded','true'); }
        else { closeMobile(); }
      });
      backdrop?.addEventListener('click', closeMobile);
      mobileNav?.addEventListener('click', (e) => { if (e.target.tagName === 'A') closeMobile(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMobile(); });

      if (deskDropdown && deskBtn) {
        const closeAll = () => deskDropdown.classList.remove('open');
        deskBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const willOpen = !deskDropdown.classList.contains('open');
          document.querySelectorAll('.dropdown.open').forEach(d => d.classList.remove('open'));
          if (willOpen) deskDropdown.classList.add('open'); else closeAll();
        });
        document.addEventListener('click', (e) => { if (!deskDropdown.contains(e.target)) deskDropdown.classList.remove('open'); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') deskDropdown.classList.remove('open'); });
      }
    })();
  </script>
</body>
</html>
