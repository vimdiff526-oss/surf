<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SloSea Slotï½œç›®æŠ¼ã—ã‚¹ãƒ­ãƒƒãƒˆã§æ³¢é‹å ã„</title>
<meta name="description" content="æ—¥æœ¬ã®ã‚¹ãƒ­ãƒƒãƒˆé¢¨3ãƒªãƒ¼ãƒ«ã€‚ç›®æŠ¼ã—ã§STOPï¼å‡ºç›®ã§ä»Šæ—¥ã®æ³¢é‹ã¨ã‚µãƒ¼ãƒ•ç”¨èªè§£èª¬ã‚’è¡¨ç¤ºã€‚å¤§å½“ãŸã‚Šã¯ã‚¢ãƒ‹ãƒ¡é¢¨ã‚­ãƒ£ãƒ©ã€‚">
<style>
  :root{
    --bg:#f7fbff; --card:#fff; --ink:#0f172a; --muted:#475569; --line:#e2e8f0;
    --brand:#0ea5e9; --accent:#22d3ee; --good:#10b981; --warn:#f59e0b; --bad:#ef4444;
  }
  *{box-sizing:border-box} html,body{margin:0}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic UI",sans-serif;
    line-height:1.6;color:var(--ink);
    background:radial-gradient(120% 100% at 50% 0%, #e6f8ff 0%, #f7fbff 55%) no-repeat var(--bg);
    min-height:100svh;
  }
  .wrap{max-width:980px;margin:0 auto;padding:20px 16px 40px}
  header{display:flex;align-items:center;justify-content:space-between;margin:8px 0 16px}
  header h1{font-size:clamp(22px,4vw,32px);margin:0}
  header small{color:var(--muted)}

  .game{background:var(--card); border:1px solid var(--line); border-radius:18px; box-shadow:0 12px 30px rgba(15,23,42,.07); padding:18px;}

  /* ==== Reels ==== */
  .reels{display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:8px;}
  .reel{
    position:relative; height:168px; border:1px solid var(--line); border-radius:16px; overflow:hidden;
    background:linear-gradient(#f8feff,#fff);
  }
  .strip{position:absolute; left:0; top:0; width:100%; will-change:transform;}
  .cell{
    height:120px; display:flex; align-items:center; justify-content:center;
    font-size:64px; background:#fff; border-top:1px solid #eef2ff; border-bottom:1px solid #eef2ff;
  }
  .cell img.char{width:100%; height:100%; object-fit:cover; display:block;}
  /* ä¸­å¤®ã‚¬ã‚¤ãƒ‰ï¼ˆè–„ã„ç·šï¼‰ */
  .reel::after{
    content:""; position:absolute; left:8px; right:8px; top:50%;
    height:0; border-top:2px dashed rgba(14,165,233,.35); transform:translateY(-50%);
    pointer-events:none;
  }

  /* ==== Controls ==== */
  .controls{display:grid; grid-template-columns:1fr 1fr 1fr 1fr; gap:12px; margin:16px 0 6px;}
  .btn{
    appearance:none; border:none; border-radius:12px; padding:12px 14px;
    font-weight:800; letter-spacing:.2px; cursor:pointer; color:#003;
    background:linear-gradient(135deg,var(--brand),var(--accent));
    box-shadow:0 10px 22px rgba(14,165,233,.25);
  }
  .btn--stop{background:#0f172a; color:#fff}
  .btn--ghost{background:#fff; color:var(--ink); border:1px solid var(--line); box-shadow:none}
  .btn:disabled{opacity:.55; cursor:not-allowed; box-shadow:none}

  /* Meter */
  .meter{height:12px; background:#eef2ff; border-radius:999px; overflow:hidden; margin:10px 0 0; border:1px solid var(--line)}
  .meter>i{display:block; height:100%; width:0%; background:linear-gradient(90deg,#60a5fa,#22d3ee,#34d399); transition:width .5s ease;}

  /* Result */
  .result{margin-top:14px; display:grid; grid-template-columns:1.2fr .8fr; gap:14px;}
  .panel{border:1px solid var(--line); border-radius:14px; padding:12px; background:#fff;}
  .result h2{font-size:clamp(18px,2.8vw,22px); margin:0 0 6px}
  .luck{font-size:clamp(18px,3.5vw,26px); font-weight:900}
  .luck.good{color:var(--good)} .luck.ok{color:#0284c7} .luck.warn{color:var(--warn)} .luck.bad{color:var(--bad)}
  .term dt{font-weight:900} .term dd{margin:0;color:var(--muted)}
  .note{color:var(--muted); font-size:13px}

  @media (max-width:760px){
    .reel{height:150px}
    .cell{height:110px;font-size:56px}
    .controls{grid-template-columns:1fr 1fr; grid-auto-rows:1fr}
    .result{grid-template-columns:1fr}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>æ³¢é‹ã‚¹ãƒ­ãƒƒãƒˆï¼ˆç›®æŠ¼ã—ç‰ˆï¼‰ <small>â€” SloSea</small></h1>
    <small class="note">â€»å®Œå…¨ãªå¨¯æ¥½æ©Ÿèƒ½ã§ã™ã€‚ã‚®ãƒ£ãƒ³ãƒ–ãƒ«è¦ç´ ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</small>
  </header>

  <section class="game" aria-label="ã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ ">
    <div class="reels">
      <div class="reel" id="reel0"><div class="strip"></div></div>
      <div class="reel" id="reel1"><div class="strip"></div></div>
      <div class="reel" id="reel2"><div class="strip"></div></div>
    </div>

    <div class="controls">
      <button id="btnStart" class="btn" type="button">SPIN</button>
      <button id="btnStop0" class="btn btn--stop" type="button" disabled>STOP 1</button>
      <button id="btnStop1" class="btn btn--stop" type="button" disabled>STOP 2</button>
      <button id="btnStop2" class="btn btn--stop" type="button" disabled>STOP 3</button>
    </div>

    <div class="meter" aria-hidden="true"><i id="meterBar"></i></div>

    <div class="result">
      <div class="panel">
        <h2>ä»Šæ—¥ã®æ³¢é‹</h2>
        <div id="luckText" class="luck ok">â€”</div>
        <p id="desc" class="note" style="margin:.4rem 0 0">SPIN ã‚’æŠ¼ã—ã¦é–‹å§‹ã—ã¦ãã ã•ã„ã€‚ä¸­å¤®ã®ç ´ç·šã«â€œç›®æŠ¼ã—â€ã§ã™ã€‚</p>
      </div>
      <div class="panel">
        <h2>ã‚µãƒ¼ãƒ•ç”¨èª</h2>
        <dl class="term">
          <dt id="termWord">â€”</dt>
          <dd id="termDesc">çµæœç¢ºå®šå¾Œã«ç”¨èªã¨è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</dd>
        </dl>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="btnAgain" class="btn btn--ghost" type="button" disabled>ã‚‚ã†ä¸€åº¦</button>
          <button id="btnShuffleTerm" class="btn btn--ghost" type="button" disabled>ç”¨èªã ã‘ã‚·ãƒ£ãƒƒãƒ•ãƒ«</button>
        </div>
      </div>
    </div>
    <p class="note" style="margin:.6rem 0 0">ã‚­ãƒ£ãƒ©ç”»åƒï¼š<code>game.png</code> ã‚’æœ¬HTMLã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã¸é…ç½®ã—ã¦ãã ã•ã„ã€‚</p>
  </section>
</div>

<script>
/* ======== ã‚·ãƒ³ãƒœãƒ«å®šç¾©ï¼ˆãƒ•ãƒ«ãƒ¼ãƒ„ï¼‹å¤§å½“ãŸã‚Šã‚­ãƒ£ãƒ©ï¼‰ ======== */
const SPECIAL_CHAR = { id:'char', type:'img', src:'./game.png', label:'CHAR' };
const FRUITS = [
  { id:'cherry', label:'ğŸ’' }, { id:'lemon', label:'ğŸ‹' }, { id:'banana', label:'ğŸŒ' },
  { id:'grape',  label:'ğŸ‡' }, { id:'peach',  label:'ğŸ‘' }, { id:'pine',   label:'ğŸ' },
  { id:'melon',  label:'ğŸˆ' }, { id:'straw',  label:'ğŸ“' }, { id:'water',  label:'ğŸ‰' }
];

/* æ—¥æœ¬ã®ã‚¹ãƒ­ãƒƒãƒˆã®ã‚ˆã†ã«å„ãƒªãƒ¼ãƒ«ã¯å›ºå®šã‚¹ãƒˆãƒªãƒƒãƒ—ï¼ˆé †ç•ªï¼‰ */
const BASE_STRIPS = [
  // Char ã¯å„ãƒªãƒ¼ãƒ«ã«1ã€œ2å€‹ã ã‘å…¥ã‚Œã¦ä½å‡ºç¾ï¼†ç›®æŠ¼ã—å¯èƒ½ã«
  [ 'lemon','grape','banana','cherry','melon','pine','straw','peach','water','banana','grape','lemon','char','peach','cherry','water' ],
  [ 'banana','water','peach','cherry','grape','lemon','melon','straw','pine','banana','grape','char','lemon','peach','water','cherry' ],
  [ 'grape','lemon','water','banana','peach','straw','pine','melon','cherry','grape','banana','water','peach','char','lemon','straw' ]
];
// idâ†’å®Ÿä½“ã¸
const ID2SYM = Object.fromEntries([
  ...FRUITS.map(o=>[o.id,o]),
  ['char', SPECIAL_CHAR]
]);

/* ======== ãƒªãƒ¼ãƒ«ç®¡ç† ======== */
const REEL_HEIGHT = 168;     // CSSã¨åˆã‚ã›ã‚‹
const CELL_HEIGHT = 120;     // CSSã¨åˆã‚ã›ã‚‹
const CENTER_TOP  = (REEL_HEIGHT - CELL_HEIGHT)/2;

// åˆ¶å¾¡ç”¨
class Reel {
  constructor(rootEl, orderIds, speed){
    this.root = rootEl;
    this.strip = rootEl.querySelector('.strip');
    this.order = orderIds.slice();                 // åŸºæœ¬é †
    this.n = this.order.length;
    this.totalH = this.n * CELL_HEIGHT;

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç”¨ã«3å‘¨åˆ†è¤‡è£½ï¼ˆç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰
    const dup = [...this.order, ...this.order, ...this.order];
    this.strip.replaceChildren(...dup.map(id => renderCell(ID2SYM[id])));

    this.pos = Math.random()*this.totalH;          // ç¾åœ¨ã‚ªãƒ•ã‚»ãƒƒãƒˆ(px)
    this.speed = speed;                            // px/s
    this.spin = false;
    this.stopping = false;
    this.targetPos = 0;
    this.finalIndex = null;
  }
  update(dt){
    if(!this.spin) return;
    if(this.stopping){
      // ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°æ¸›é€Ÿï¼špos -> targetPos
      const REMAIN = this.targetPos - this.pos;
      const vel = Math.max(320, this.speed * 0.08); // æœ€ä½é€Ÿåº¦
      const step = Math.min(Math.abs(REMAIN), vel * dt) * Math.sign(REMAIN);
      this.pos += step;
      if(Math.abs(REMAIN) < 0.6){ // ã»ã¼åˆ°é”
        this.pos = this.targetPos;
        this.spin = false;
        this.stopping = false;
        this.finalIndex = this.indexAtCenter(); // æ±ºå®š
      }
    } else {
      this.pos += this.speed * dt;
    }
    // wrap
    if(this.pos >= this.totalH) this.pos -= this.totalH;
    // åæ˜ 
    this.strip.style.transform = `translateY(${-this.pos}px)`;
  }
  indexAtCenter(){
    // ç¾åœ¨ã®ä¸­å¿ƒã«è¿‘ã„ã‚»ãƒ«ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆ0..n-1ï¼‰
    const p = (this.pos + CENTER_TOP) % this.totalH;     // ä¸­å¤®ãƒ©ã‚¤ãƒ³ã®â€œstripä¸Šã®ä½ç½®â€
    const idx = Math.round(p / CELL_HEIGHT) % this.n;
    return idx < 0 ? idx + this.n : idx;
  }
  computeStopTarget(){
    // æŠ¼ã—ãŸç¬é–“ã®ä¸­å¿ƒã«ã‚ã‚‹ã‚»ãƒ«idxã‚’æ¡ç”¨ã—ã€1å‘¨ä»¥ä¸Šå…ˆã§ãƒ”ã‚¿ãƒƒã¨æ­¢ã¾ã‚‹ã‚ˆã†ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’è¨ˆç®—
    const idx = this.indexAtCenter();
    const base = idx * CELL_HEIGHT - CENTER_TOP;
    let t = mod(base, this.totalH);
    // æœ€ä½ã§ã‚‚ 1.2å‘¨ å…ˆã«ã—ã¦æ¸›é€Ÿæ¼”å‡º
    const minTravel = this.totalH * 1.2;
    while(t < this.pos + minTravel){ t += this.totalH; }
    this.targetPos = t;
    this.stopping = true;
    return idx;
  }
}
function renderCell(sym){
  const el = document.createElement('div'); el.className = 'cell';
  if(sym.type === 'img'){
    const img = document.createElement('img'); img.className='char'; img.src = sym.src; img.alt = 'å¤§å½“ãŸã‚Šã‚­ãƒ£ãƒ©';
    el.appendChild(img);
  } else {
    el.textContent = sym.label;
  }
  el.dataset.id = sym.id;
  return el;
}
const mod = (x,m)=>((x%m)+m)%m;

/* ======== åˆæœŸåŒ– ======== */
const reels = [
  new Reel(document.getElementById('reel0'), BASE_STRIPS[0], 900),  // px/s
  new Reel(document.getElementById('reel1'), BASE_STRIPS[1], 980),
  new Reel(document.getElementById('reel2'), BASE_STRIPS[2], 1060)
];
reels.forEach(r=>r.strip.style.transform = `translateY(${-r.pos}px)`);

/* ======== ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« ======== */
const btnStart = document.getElementById('btnStart');
const btnStops  = [0,1,2].map(i=>document.getElementById('btnStop'+i));
const btnAgain  = document.getElementById('btnAgain');
const btnShuffleTerm = document.getElementById('btnShuffleTerm');
const meterBar = document.getElementById('meterBar');
const luckText = document.getElementById('luckText');
const desc = document.getElementById('desc');

btnStart.addEventListener('click', startSpin);
btnStops.forEach((b,i)=>b.addEventListener('click', ()=>stopReel(i)));
btnAgain.addEventListener('click', ()=>{ resetUI(); startSpin(); });
btnShuffleTerm.addEventListener('click', showRandomTerm);

/* ã‚­ãƒ¼æ“ä½œï¼ˆ1,2,3ã§STOPï¼‰ */
window.addEventListener('keydown', (e)=>{
  if(e.key === ' ') { e.preventDefault(); if(!btnStart.disabled) startSpin(); }
  if(e.key === '1') stopReel(0);
  if(e.key === '2') stopReel(1);
  if(e.key === '3') stopReel(2);
});

/* ======== ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ— ======== */
let last = performance.now();
(function loop(t){
  const dt = Math.min(0.04, (t - last)/1000); // <= 40ms
  last = t;
  reels.forEach(r=>r.update(dt));
  requestAnimationFrame(loop);
})(last);

function startSpin(){
  resetUI();
  btnStart.disabled = true;
  btnAgain.disabled = true;
  btnShuffleTerm.disabled = true;
  btnStops.forEach(b=>b.disabled=false);

  luckText.textContent = 'ã‚¹ãƒ”ãƒ³ä¸­â€¦';
  luckText.className = 'luck ok';
  desc.textContent = 'æ­¢ã‚ãŸã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ STOP ã‚’æŠ¼ã—ã¦ãã ã•ã„ï¼ˆä¸­å¤®ã®ç ´ç·šã«æƒã„ã¾ã™ï¼‰ã€‚';

  reels.forEach((r,idx)=>{
    r.spin = true; r.stopping = false; r.finalIndex = null;
    // ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã«å°‘ã—ã‚ºãƒ©ã™
    r.pos = mod(r.pos + (idx*CELL_HEIGHT/2), r.totalH);
  });
}

function stopReel(i){
  const r = reels[i];
  if(!r.spin || r.stopping) return;
  r.computeStopTarget();      // ç›®æŠ¼ã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ­¢ã‚å…ˆã‚’ç¢ºå®š
  btnStops[i].disabled = true;

  // å…¨éƒ¨æ­¢ã¾ã£ãŸã‚‰è©•ä¾¡
  if(reels.every(R=>!R.spin || R.stopping)){ // å…¨STOPæŠ¼ä¸‹æ¸ˆã¿
    pollAllStopped().then(evaluate);
  }
}
function pollAllStopped(){
  return new Promise(resolve=>{
    const id = setInterval(()=>{
      if(reels.every(r=>!r.spin && !r.stopping)){ clearInterval(id); resolve(); }
    }, 40);
  });
}

function resetUI(){
  meterBar.style.width = '0%';
  luckText.textContent = 'â€”';
  luckText.className = 'luck ok';
  desc.textContent = 'SPIN ã‚’æŠ¼ã—ã¦é–‹å§‹ã—ã¦ãã ã•ã„ã€‚';
  document.getElementById('termWord').textContent = 'â€”';
  document.getElementById('termDesc').textContent = 'çµæœç¢ºå®šå¾Œã«ç”¨èªãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚';
  btnStops.forEach(b=>b.disabled=true);
}

/* ======== åˆ¤å®š ======== */
function evaluate(){
  // ä¸­å¿ƒã«åœæ­¢ã—ãŸå„ãƒªãƒ¼ãƒ«ã®ã‚·ãƒ³ãƒœãƒ«ã‚’å–å¾—
  const ids = reels.map((r,ri)=>{
    const idx = r.finalIndex ?? r.indexAtCenter();
    const id  = BASE_STRIPS[ri][idx % BASE_STRIPS[ri].length];
    return id;
  });

  const counts = ids.reduce((m,id)=> (m[id]=(m[id]||0)+1, m), {});
  const hasChar = ids.includes('char');

  let score = 40, message='æ™®é€šï¼šç„¡ç†ãªãç·´ç¿’æ—¥å’Œã€‚', level='ok';
  const uniq = Object.keys(counts).length;

  if(uniq===1){
    if(hasChar){ score=100; message='å¤§å½“ãŸã‚Šï¼çˆ†ç™ºçš„ï¼šæœ€é«˜ã®ä¸€æœ¬ã‚’ç‹™ãˆã‚‹æ—¥ã€‚'; level='good'; confetti(); }
    else{ score=86; message='çµ¶å¥½èª¿ï¼šã‚»ãƒƒãƒˆã§è‰¯ã„æ³¢ãŒå®‰å®šã€‚'; level='good'; }
  }else if(uniq===2){
    const pairId = Object.entries(counts).find(([id,c])=>c===2)?.[0];
    const hasPair = !!pairId && pairId!=='char';
    if(hasChar && hasPair){ score=78; message='ã‹ãªã‚Šè‰¯ã„ï¼šé¢¨ã¨æ½®ã‚’åˆã‚ã›ã¦ç‹™ã„æ’ƒã¡ã€‚'; level='good'; }
    else if(hasPair){ score=62; message='ã¾ãšã¾ãšï¼šæ··é›‘å›é¿ã§å……å®Ÿã‚»ãƒƒã‚·ãƒ§ãƒ³ã¸ã€‚'; level='ok'; }
    else{ score=55; message='å¯ã‚‚ãªãä¸å¯ã‚‚ãªãï¼šæ½®å›ã‚Šæ¬¡ç¬¬ã€‚'; level='ok'; }
  }else{
    if(hasChar){ score=58; message='ãƒãƒ£ãƒ³ã‚¹æœ‰ã‚Šï¼šã‚¿ã‚¤ãƒŸãƒ³ã‚°æ¬¡ç¬¬ã§å½“ã¦ã‚‰ã‚Œãã†ã€‚'; level='ok'; }
    else{ score=30; message='ã‚¤ãƒã‚¤ãƒï¼šç„¡ç†ã›ãšé™¸ãƒˆãƒ¬ã‚„æƒ…å ±åé›†ã‚‚ã€‚'; level='warn'; }
  }

  meterBar.style.width = Math.min(score,100)+'%';
  luckText.textContent = message;
  luckText.className = 'luck ' + (level==='good'?'good':level==='warn'?'warn':'ok');
  desc.textContent = `å‡ºç›®ï¼š${ids.map(idToEmoji).join(' | ')}`;

  btnAgain.disabled = false;
  btnShuffleTerm.disabled = false;
  btnStart.disabled = false;

  showRandomTerm();
}
function idToEmoji(id){
  if(id==='char') return 'ğŸ¯å¤§å½“ãŸã‚Šã‚­ãƒ£ãƒ©';
  const f = FRUITS.find(x=>x.id===id); return f ? f.label : 'ï¼Ÿ';
}

/* ======== ç”¨èª ======== */
const TERMS = [
  ['ã‚ªãƒ•ã‚·ãƒ§ã‚¢','æµ·ã‹ã‚‰é™¸ã¸å‘ã‹ã†é¢¨ã€‚é¢ãŒæ•´ã„ã‚„ã™ãã€è‰¯ã„ãƒ–ãƒ¬ã‚¤ã‚¯ã‚’ç”Ÿã‚€ã€‚'],
  ['ã‚ªãƒ³ã‚·ãƒ§ã‚¢','é™¸ã‹ã‚‰æµ·ã¸å‘ã‹ã†é¢¨ã€‚é¢ãŒè’ã‚ŒãŒã¡ã§ãƒˆãƒ­ã‚ã®å‰²ã‚Œæ–¹ã«ãªã‚Šã‚„ã™ã„ã€‚'],
  ['ã‚»ãƒƒãƒˆ','å‘¨æœŸçš„ã«å…¥ã‚‹ã‚µã‚¤ã‚ºã®å¤§ãã„æ³¢ã®ã¾ã¨ã¾ã‚Šã€‚é–“éš”ã‚‚æ„è­˜ã€‚'],
  ['ãƒ”ãƒ¼ã‚¯','æ³¢ãŒæœ€åˆã«ç«‹ã¡ä¸ŠãŒã‚‹é ‚ç‚¹ã€‚æœ€ã‚‚ãƒ‘ãƒ¯ãƒ¼ãŒé›†ä¸­ã™ã‚‹ä½ç½®ã€‚'],
  ['ã‚·ãƒ§ãƒ«ãƒ€ãƒ¼','ãƒ”ãƒ¼ã‚¯ã‹ã‚‰æ¨ªã«ä¼¸ã³ã‚‹ä¹—ã‚Šã—ã‚éƒ¨åˆ†ã€‚ãƒ©ã‚¤ãƒ³ã©ã‚Šã®ã‚­ãƒ¼ã€‚'],
  ['ã‚¤ãƒ³ã‚µã‚¤ãƒ‰','å²¸ã«è¿‘ã„æµ…å ´ã€‚ã‚¹ãƒ¼ãƒ—ãŒå¤šãæˆ»ã‚ŠãŒé‡ã„ã€‚'],
  ['ã‚¢ã‚¦ãƒˆ','æ²–å´ã®ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—ã€‚å¾…æ©Ÿã¨ãƒ†ã‚¤ã‚¯ã‚ªãƒ•ã®åŸºç‚¹ã€‚'],
  ['ãƒ€ãƒƒã‚¯ãƒ€ã‚¤ãƒ–','ãƒœãƒ¼ãƒ‰ã‚’æ²ˆã‚ã¦æ³¢ã®ä¸‹ã‚’ããã‚‹ã€‚ã‚·ãƒ§ãƒ¼ãƒˆå‘ã‘ã€‚'],
  ['ãƒ†ã‚¤ã‚¯ã‚ªãƒ•','æ³¢ã«æŠ¼ã•ã‚Œã¦ç«‹ã¡ä¸ŠãŒã‚‹å‹•ä½œã€‚åˆç´šè€…ã®æœ€é‡è¦åŸºç¤ã€‚'],
  ['ãƒœãƒˆãƒ ã‚¿ãƒ¼ãƒ³','ç«‹ã¡ä¸ŠãŒã‚Šç›´å¾Œã®å¤§ããªã‚¿ãƒ¼ãƒ³ã€‚ä»¥é™ã®å‹•ãã®åœŸå°ã€‚'],
  ['ã‚«ãƒƒãƒˆãƒãƒƒã‚¯','èµ°ã‚Šã™ãå¾Œã«ãƒ–ãƒ¬ã‚¤ã‚¯ã¸æˆ»ã‚‹ã‚¿ãƒ¼ãƒ³ã€‚ã‚¹ãƒ”ãƒ¼ãƒ‰èª¿æ•´ã€‚'],
  ['ãƒªãƒƒãƒ—','æ³¢ã®å´©ã‚Œã‚‹ä¸Šç«¯ã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®çš„ã«ãªã‚‹ã€‚'],
  ['ã‚¯ãƒ­ãƒ¼ã‚ºã‚¢ã‚¦ãƒˆ','å²¸ã¾ã§ä¸€æ–‰ã«å‰²ã‚Œã‚‹çŠ¶æ…‹ã€‚èµ°ã‚‹ä½™åœ°ãŒå°‘ãªã„ã€‚'],
  ['ãƒ€ãƒ³ãƒ‘ãƒ¼','æ€¥ã«æ½°ã‚Œã‚‹åŠ›å¼·ã„å‰²ã‚Œã€‚åˆºã•ã‚Šã‚„ã™ãæ³¨æ„ã€‚'],
  ['ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼/ã‚°ãƒ¼ãƒ•ã‚£ãƒ¼','å³è¶³/å·¦è¶³ãŒå¾Œã‚ã®ã‚¹ã‚¿ãƒ³ã‚¹ã€‚è‡ªåˆ†ã®å‘ãã‚’æŠŠæ¡ã€‚'],
  ['ã‚·ãƒ§ã‚¢ãƒ–ãƒ¬ã‚¤ã‚¯','å²¸è¿‘ãã§æ€¥ã«æ˜ã‚Œã‚‹æ³¢ã€‚ã‚µã‚¤ã‚ºä»¥ä¸Šã«å±é™ºåº¦é«˜ã‚ã€‚'],
  ['ã‚¯ãƒ­ã‚¹ã‚·ãƒ§ã‚¢','æ¨ªé¢¨ã€‚é¢ãŒãƒãƒ©ã‘ã‚„ã™ã„ãŒãƒã‚¸ã‚·ãƒ§ãƒ³æ¬¡ç¬¬ã§â—ã€‚'],
  ['ãƒ•ã‚§ã‚¤ã‚¹','æ³¢ã®æ»‘èµ°é¢ã€‚ç¶ºéº—ãªãƒ•ã‚§ã‚¤ã‚¹ï¼ä¹—ã‚Šã‚„ã™ã„ã‚µã‚¤ãƒ³ã€‚']
];
function showRandomTerm(){
  const [w,d] = TERMS[Math.floor(Math.random()*TERMS.length)];
  document.getElementById('termWord').textContent = w;
  document.getElementById('termDesc').textContent = d;
}

/* ======== ç´™å¹é›ª ======== */
function confetti(){
  const n=24, root=document.body;
  for(let i=0;i<n;i++){
    const s=document.createElement('div');
    const size=8+Math.random()*8;
    s.style.position='fixed'; s.style.left=Math.random()*100+'vw'; s.style.top='-10px';
    s.style.width=size+'px'; s.style.height=size+'px';
    s.style.background=`hsl(${Math.floor(Math.random()*360)} 85% 60%)`;
    s.style.borderRadius='2px'; s.style.opacity='0.9'; s.style.zIndex='9999';
    s.style.transform=`rotate(${Math.random()*360}deg)`;
    s.style.transition='transform 1.2s linear, top 1.2s linear, opacity .3s ease 1.1s';
    root.appendChild(s);
    requestAnimationFrame(()=>{
      s.style.top='110vh';
      s.style.transform+=` translateY(100vh) rotate(${720+Math.random()*360}deg)`;
      s.addEventListener('transitionend',()=>s.remove(),{once:true});
      setTimeout(()=>s.style.opacity='0',1100);
    });
  }
}
</script>
</body>
</html>
