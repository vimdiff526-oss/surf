<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SloSea Slotï½œç›®æŠ¼ã—ã‚¹ãƒ­ãƒƒãƒˆï¼ˆä¸Šâ†’ä¸‹ï¼å³åœæ­¢ï¼‰</title>
<meta name="description" content="æ—¥æœ¬ã®ã‚¹ãƒ­ãƒƒãƒˆé¢¨3ãƒªãƒ¼ãƒ«ã€‚å›è»¢ã¯ä¸Šã‹ã‚‰ä¸‹ã¸ã€‚STOPã§ã™ãåœæ­¢ï¼†ä¸­å¤®ãƒ©ã‚¤ãƒ³ã§ã‚¹ãƒŠãƒƒãƒ—ã€‚å‡ºç›®ã§ä»Šæ—¥ã®æ³¢é‹ã¨ã‚µãƒ¼ãƒ•ç”¨èªã‚’è¡¨ç¤ºã€‚å¤§å½“ãŸã‚Šã¯ã‚¢ãƒ‹ãƒ¡é¢¨ã‚­ãƒ£ãƒ©ã€‚">
<style>
  :root{
    --bg:#f7fbff; --card:#fff; --ink:#0f172a; --muted:#475569; --line:#e2e8f0;
    --brand:#0ea5e9; --accent:#22d3ee; --good:#10b981; --warn:#f59e0b; --bad:#ef4444;
  }
  *{box-sizing:border-box} html,body{margin:0}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic UI",sans-serif;
    line-height:1.6;color:var(--ink);
    background:radial-gradient(120% 100% at 50% 0%, #e6f8ff 0%, #f7fbff 55%) no-repeat var(--bg);
    min-height:100svh;
  }
  .wrap{max-width:980px;margin:0 auto;padding:20px 16px 40px}
  header{display:flex;align-items:center;justify-content:space-between;margin:8px 0 16px}
  header h1{font-size:clamp(22px,4vw,32px);margin:0}
  header small{color:var(--muted)}

  .game{background:var(--card); border:1px solid var(--line); border-radius:18px; box-shadow:0 12px 30px rgba(15,23,42,.07); padding:18px;}

  /* ==== Reels ==== */
  .reels{display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:8px;}
  .reel{
    position:relative; height:168px; border:1px solid var(--line); border-radius:16px; overflow:hidden;
    background:linear-gradient(#f8feff,#fff);
  }
  .strip{position:absolute; left:0; top:0; width:100%; will-change:transform;}
  .cell{
    height:120px; display:flex; align-items:center; justify-content:center;
    font-size:64px; background:#fff; border-top:1px solid #eef2ff; border-bottom:1px solid #eef2ff;
  }
  .cell img.char{width:100%; height:100%; object-fit:cover; display:block;}
  /* ä¸­å¤®ã‚¬ã‚¤ãƒ‰ï¼ˆè–„ã„ç·šï¼‰ */
  .reel::after{
    content:""; position:absolute; left:8px; right:8px; top:50%;
    height:0; border-top:2px dashed rgba(14,165,233,.35); transform:translateY(-50%);
    pointer-events:none;
  }

  /* ==== Controls ==== */
  .controls{display:grid; grid-template-columns:1fr 1fr 1fr 1fr; gap:12px; margin:16px 0 6px;}
  .btn{
    appearance:none; border:none; border-radius:12px; padding:12px 14px;
    font-weight:800; letter-spacing:.2px; cursor:pointer; color:#003;
    background:linear-gradient(135deg,var(--brand),var(--accent));
    box-shadow:0 10px 22px rgba(14,165,233,.25);
  }
  .btn--stop{background:#0f172a; color:#fff}
  .btn--ghost{background:#fff; color:var(--ink); border:1px solid var(--line); box-shadow:none}
  .btn:disabled{opacity:.55; cursor:not-allowed; box-shadow:none}

  /* Meter */
  .meter{height:12px; background:#eef2ff; border-radius:999px; overflow:hidden; margin:10px 0 0; border:1px solid var(--line)}
  .meter>i{display:block; height:100%; width:0%; background:linear-gradient(90deg,#60a5fa,#22d3ee,#34d399); transition:width .5s ease;}

  /* Result */
  .result{margin-top:14px; display:grid; grid-template-columns:1.2fr .8fr; gap:14px;}
  .panel{border:1px solid var(--line); border-radius:14px; padding:12px; background:#fff;}
  .result h2{font-size:clamp(18px,2.8vw,22px); margin:0 0 6px}
  .luck{font-size:clamp(18px,3.5vw,26px); font-weight:900}
  .luck.good{color:var(--good)} .luck.ok{color:#0284c7} .luck.warn{color:var(--warn)} .luck.bad{color:var(--bad)}
  .term dt{font-weight:900} .term dd{margin:0;color:var(--muted)}
  .note{color:var(--muted); font-size:13px}

  @media (max-width:760px){
    .reel{height:150px}
    .cell{height:110px;font-size:56px}
    .controls{grid-template-columns:1fr 1fr; grid-auto-rows:1fr}
    .result{grid-template-columns:1fr}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>æ³¢é‹ã‚¹ãƒ­ãƒƒãƒˆï¼ˆä¸Šâ†’ä¸‹ï¼å³åœæ­¢ç‰ˆï¼‰ <small>â€” SloSea</small></h1>
    <small class="note">â€»å®Œå…¨ãªå¨¯æ¥½æ©Ÿèƒ½ã§ã™ã€‚ã‚®ãƒ£ãƒ³ãƒ–ãƒ«è¦ç´ ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</small>
  </header>

  <section class="game" aria-label="ã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ ">
    <div class="reels">
      <div class="reel" id="reel0"><div class="strip"></div></div>
      <div class="reel" id="reel1"><div class="strip"></div></div>
      <div class="reel" id="reel2"><div class="strip"></div></div>
    </div>

    <div class="controls">
      <button id="btnStart" class="btn" type="button">SPIN</button>
      <button id="btnStop0" class="btn btn--stop" type="button" disabled>STOP 1</button>
      <button id="btnStop1" class="btn btn--stop" type="button" disabled>STOP 2</button>
      <button id="btnStop2" class="btn btn--stop" type="button" disabled>STOP 3</button>
    </div>

    <div class="meter" aria-hidden="true"><i id="meterBar"></i></div>

    <div class="result">
      <div class="panel">
        <h2>ä»Šæ—¥ã®æ³¢é‹</h2>
        <div id="luckText" class="luck ok">â€”</div>
        <p id="desc" class="note" style="margin:.4rem 0 0">SPIN â†’ ç›®æŠ¼ã—ã§ STOPã€‚ä¸­å¤®ã®ç ´ç·šä½ç½®ã§å³åœæ­¢ã—ã¾ã™ã€‚</p>
      </div>
      <div class="panel">
        <h2>ã‚µãƒ¼ãƒ•ç”¨èª</h2>
        <dl class="term">
          <dt id="termWord">â€”</dt>
          <dd id="termDesc">çµæœç¢ºå®šå¾Œã«ç”¨èªã¨è§£èª¬ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</dd>
        </dl>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="btnAgain" class="btn btn--ghost" type="button" disabled>ã‚‚ã†ä¸€åº¦</button>
          <button id="btnShuffleTerm" class="btn btn--ghost" type="button" disabled>ç”¨èªã ã‘ã‚·ãƒ£ãƒƒãƒ•ãƒ«</button>
        </div>
      </div>
    </div>
    <p class="note" style="margin:.6rem 0 0">ã‚­ãƒ£ãƒ©ç”»åƒï¼š<code>game.png</code> ã‚’æœ¬HTMLã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã¸é…ç½®ã—ã¦ãã ã•ã„ã€‚</p>
  </section>
</div>

<script>
/* ======== ã‚·ãƒ³ãƒœãƒ«å®šç¾©ï¼ˆãƒ•ãƒ«ãƒ¼ãƒ„ï¼‹å¤§å½“ãŸã‚Šã‚­ãƒ£ãƒ©ï¼‰ ======== */
const SPECIAL_CHAR = { id:'char', type:'img', src:'./game.png', label:'CHAR' };
const FRUITS = [
  { id:'cherry', label:'ğŸ’' }, { id:'lemon', label:'ğŸ‹' }, { id:'banana', label:'ğŸŒ' },
  { id:'grape',  label:'ğŸ‡' }, { id:'peach',  label:'ğŸ‘' }, { id:'pine',   label:'ğŸ' },
  { id:'melon',  label:'ğŸˆ' }, { id:'straw',  label:'ğŸ“' }, { id:'water',  label:'ğŸ‰' }
];

/* ==== å‰å›ã¨åŒã˜å›ºå®šã‚¹ãƒˆãƒªãƒƒãƒ—ï¼ˆé †ç•ªã¯å¤‰æ›´ã—ã¦ã„ã¾ã›ã‚“ï¼‰ ==== */
const BASE_STRIPS = [
  [ 'lemon','grape','banana','cherry','melon','pine','straw','peach','water','banana','grape','lemon','char','peach','cherry','water' ],
  [ 'banana','water','peach','cherry','grape','lemon','melon','straw','pine','banana','grape','char','lemon','peach','water','cherry' ],
  [ 'grape','lemon','water','banana','peach','straw','pine','melon','cherry','grape','banana','water','peach','char','lemon','straw' ]
];
const ID2SYM = Object.fromEntries([
  ...FRUITS.map(o=>[o.id,o]),
  ['char', SPECIAL_CHAR]
]);

/* ======== ãƒªãƒ¼ãƒ«ç®¡ç†ï¼ˆä¸Šâ†’ä¸‹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã€å³åœæ­¢ã‚¹ãƒŠãƒƒãƒ—ï¼‰ ======== */
const REEL_HEIGHT = 168;     // CSSã¨åˆã‚ã›ã‚‹
theconst_CELL_HEIGHT = 120;  // typo! fix: need to ensure correct variable name. Oops.

