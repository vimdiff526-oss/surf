<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­ | SEA LIFE HUB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="ä½“é‡Ã—ä¿‚æ•°ã§æ¨å¥¨ãƒœãƒªãƒ¥ãƒ¼ãƒ (â„“)ã‚’ç®—å‡ºã—ã€ç›®çš„ã«åˆã£ãŸæ¿ã‚¿ã‚¤ãƒ—ã¨é•·ã•/å¹…/åšã¿ã®ç›®å®‰ã‚‚ææ¡ˆã€‚ãƒ†ãƒ¼ãƒ«å½¢çŠ¶ã‚„ãƒ¬ãƒ¼ãƒ«åšã€ãƒ­ãƒƒã‚«ãƒ¼ã®å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ä»˜ãã€‚" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã“ã®ãƒšãƒ¼ã‚¸å°‚ç”¨ã®æœ€å°é™ï¼‰ */
    form#surfForm{
      display:grid; gap:12px; max-width:800px; margin:16px auto 0; grid-template-columns:1fr 1fr;
      background: rgba(0,0,0,0.35); padding:16px; border-radius:12px;
    }
    form#surfForm label{ display:flex; flex-direction:column; gap:6px; font-weight:600; }
    form#surfForm select, form#surfForm input{ padding:10px; border-radius:8px; border:none; }
    .span2{ grid-column:1/-1; }
    .hint{ opacity:.85; font-size:.92rem; }
    .result{ margin-top:20px; display:grid; gap:16px; }
    .result .grid{ display:grid; gap:16px; grid-template-columns: 1.2fr 1fr; }
    @media (max-width: 900px){ .result .grid{ grid-template-columns: 1fr; } }
    .card img{ height: 200px; }
    .table{
      width:100%; border-collapse: collapse; overflow:hidden; border-radius:12px;
      background: rgba(0,0,0,0.25);
    }
    .table th, .table td{ padding:10px 12px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .table th{ text-align:left; color: var(--c-accent); }
    .badge{ display:inline-block; padding:2px 8px; border-radius:9999px; background: rgba(255,255,255,0.15); font-size:.85rem; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .mini{ font-size:.9rem; opacity:.9; }

    /* å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ */
    .accordion{ margin-top:24px; }
    .acc-item{ background: rgba(0,0,0,0.35); border-radius:12px; margin-bottom:10px; overflow:hidden; }
    .acc-head{
      width:100%; text-align:left; background: transparent; border:none; padding:14px 16px;
      color:#fff; display:flex; justify-content:space-between; align-items:center; cursor:pointer;
    }
    .acc-head:hover{ background: rgba(255,255,255,0.08); }
    .acc-body{ display:none; padding:0 16px 16px; }
    .acc-item.open .acc-body{ display:block; }
    .chev{ transition: transform .2s ease; }
    .acc-item.open .chev{ transform: rotate(90deg); }

    /* SVG ç°¡æ˜“ã‚¢ã‚¤ã‚³ãƒ³æ•´å½¢ */
    .icon-row{ display:flex; gap:16px; flex-wrap:wrap; margin-top:8px; }
    .icon-card{
      background: rgba(255,255,255,0.06); padding:10px; border-radius:10px; display:flex; gap:10px; align-items:center;
    }
    .icon-card svg{ width:52px; height:32px; }
  </style>
</head>
<body>
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="site-header">
    <a href="index.html" class="logo">ğŸŒŠ SEA LIFE HUB</a>

    <!-- ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ -->
    <nav class="site-nav" aria-label="Primary">
      <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
      <div class="dropdown">
        <button class="dropbtn" aria-haspopup="true" aria-expanded="false">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â–¾</button>
        <div class="dropdown-content" role="menu">
          <a href="diagnosis.html" class="is-active" role="menuitem">ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­</a>
          <a href="apparel.html" role="menuitem">ã‚¢ãƒ‘ãƒ¬ãƒ«ï¼ˆTã‚·ãƒ£ãƒ„ï¼‰</a>
          <a href="stays.html" role="menuitem">æµ·æ²¿ã„æ°‘æ³Š</a>
        </div>
      </div>
      <a href="index.html#about">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
    </nav>

    <!-- ãƒ¢ãƒã‚¤ãƒ«ï¼šãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
    <button class="hamburger" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã" aria-controls="mobileNav" aria-expanded="false">
      <span class="bar"></span>
    </button>
  </header>
  <div class="header-spacer"></div>

  <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <div class="mobile-nav-backdrop" id="backdrop"></div>
  <nav class="mobile-nav" id="mobileNav" aria-label="Mobile">
    <div class="mobile-title">ğŸŒŠ SEA LIFE HUB</div>
    <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
    <a href="diagnosis.html" class="is-active">ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­</a>
    <a href="apparel.html">ã‚¢ãƒ‘ãƒ¬ãƒ«ï¼ˆTã‚·ãƒ£ãƒ„ï¼‰</a>
    <a href="stays.html">æµ·æ²¿ã„æ°‘æ³Š</a>
    <a href="index.html#about">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
  </nav>

  <!-- æœ¬æ–‡ -->
  <section class="overlay">
    <main class="container">
      <h1 class="section-title">ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰è¨ºæ–­ï¼ˆä¿‚æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‹å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼‰</h1>
      <p class="hint">â€»æ¨å¥¨ã¯ã‚ãã¾ã§ç›®å®‰ã§ã™ã€‚ä½“åŠ›ãƒ»å¥½ã¿ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ã®æ³¢è³ªã§æœ€çµ‚èª¿æ•´ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</p>

      <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
      <form id="surfForm">
        <label>
          ä½“é‡ï¼ˆkgï¼‰
          <input id="weight" type="number" min="35" max="120" step="1" placeholder="ä¾‹ï¼‰68" required />
        </label>
        <label>
          ãƒ¬ãƒ™ãƒ«
          <select id="level">
            <option value="beginner">åˆå¿ƒè€…</option>
            <option value="intermediate">ä¸­ç´š</option>
            <option value="advanced">ä¸Šç´š</option>
          </select>
        </label>

        <label>
          ã‚ˆãè¡Œãæ³¢ã‚µã‚¤ã‚º
          <select id="wave">
            <option value="small">å°æ³¢ï¼ˆè†ã€œè…¹ï¼‰</option>
            <option value="mid" selected>ãƒŸãƒ‰ãƒ«ï¼ˆè…°ã€œèƒ¸ï¼‰</option>
            <option value="solid">ã‚µã‚¤ã‚ºã‚ã‚Šï¼ˆè‚©ã€œé ­ä»¥ä¸Šï¼‰</option>
          </select>
        </label>
        <label>
          ç›®æŒ‡ã™ã‚¹ã‚¿ã‚¤ãƒ«
          <select id="style">
            <option value="easy">ã¾ãšã¯æ¥½ã«ãŸãã•ã‚“ä¹—ã‚ŠãŸã„</option>
            <option value="maneuver" selected>ã‚¿ãƒ¼ãƒ³ã‚„æŠ€ã‚’ç£¨ããŸã„</option>
            <option value="cruise">ã‚†ã£ãŸã‚Šã‚¯ãƒ«ãƒ¼ã‚ºã—ãŸã„</option>
          </select>
        </label>

        <label>
          ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹/ãƒ‘ãƒ‰ãƒ«ä½“åŠ›
          <select id="fitness">
            <option value="low">ã‚„ã‚„å¼±ã‚</option>
            <option value="mid" selected>ãµã¤ã†</option>
            <option value="high">å¼·ã‚</option>
          </select>
        </label>

        <label>
          å¥½ã¿ã®æµ®åŠ›æ„Ÿ
          <select id="floatPref">
            <option value="more">ã‚„ã‚„å¤šã‚ï¼ˆå®‰å¿ƒæ„Ÿï¼‰</option>
            <option value="neutral" selected>ãµã¤ã†</option>
            <option value="less">ã‚„ã‚„å°‘ãªã‚ï¼ˆå–ã‚Šå›ã—é‡è¦–ï¼‰</option>
          </select>
        </label>

        <div class="span2 row mini">
          <span class="badge">ä¿‚æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå‚è€ƒï¼‰</span>
          <span>åˆå¿ƒè€…ï¼š0.50ï½œä¸­ç´šï¼š0.45ï½œä¸Šç´šï¼š0.40 ã‚’åŸºæº–ã€ä½“åŠ›Â±0.03ã€å¥½ã¿Â±0.02ã§å¾®èª¿æ•´ã—ã¾ã™ã€‚</span>
        </div>

        <button class="btn primary span2" type="button" onclick="diagnose()">è¨ºæ–­ã™ã‚‹</button>
      </form>

      <!-- çµæœ -->
      <div id="result" class="result"></div>

      <!-- å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼šãƒ†ãƒ¼ãƒ«å½¢çŠ¶ / ãƒ¬ãƒ¼ãƒ«åš / ãƒ­ãƒƒã‚«ãƒ¼ -->
      <section class="accordion">
        <h2 class="section-title">å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰</h2>

        <div class="acc-item">
          <button class="acc-head">
            <strong>ãƒ†ãƒ¼ãƒ«å½¢çŠ¶ã®åŸºæœ¬</strong>
            <span class="chev">â–¶</span>
          </button>
          <div class="acc-body">
            <p>ãƒ†ãƒ¼ãƒ«å½¢çŠ¶ã¯æ°´ã®æŠœã‘ã‚„ã‚¨ãƒƒã‚¸ã®é£Ÿã„ä»˜ãã«å½±éŸ¿ã—ã€ã‚¿ãƒ¼ãƒ³ã‚„åŠ é€Ÿã®æ€§æ ¼ã‚’æ±ºã‚ã¾ã™ã€‚</p>
            <div class="icon-row">
              <div class="icon-card">
                <!-- Squash -->
                <svg viewBox="0 0 100 60" aria-hidden="true">
                  <path d="M5,10 C50,5 50,5 95,10 L95,50 L5,50 Z" fill="none" stroke="white"/>
                  <rect x="55" y="45" width="20" height="5" fill="white" />
                </svg>
                <div><strong>ã‚¹ã‚¯ã‚¢ãƒƒã‚·ãƒ¥</strong><br><span class="mini">æ±ç”¨æ€§â—ã€‚ã‚¿ãƒ¼ãƒ³ã®åˆ‡ã‚Šè¿”ã—ãŒè»½ãã€å°ã€œä¸­æ³¢ã§æ‰±ã„ã‚„ã™ã„ã€‚</span></div>
              </div>
              <div class="icon-card">
                <!-- Swallow -->
                <svg viewBox="0 0 100 60" aria-hidden="true">
                  <path d="M5,10 C50,5 50,5 95,10 L95,50 L60,50 L50,40 L40,50 L5,50 Z" fill="none" stroke="white"/>
                </svg>
                <div><strong>ã‚¹ãƒ¯ãƒ­ãƒ¼</strong><br><span class="mini">å°æ³¢ã§ã‚°ãƒªãƒƒãƒ—ã¨ãƒ‰ãƒ©ã‚¤ãƒ–ã€‚ãƒ„ã‚¤ãƒ³/ãƒ•ã‚£ãƒƒã‚·ãƒ¥ã¨å¥½ç›¸æ€§ã€‚</span></div>
              </div>
              <div class="icon-card">
                <!-- Round -->
                <svg viewBox="0 0 100 60" aria-hidden="true">
                  <path d="M5,10 C50,5 50,5 95,10 L95,50 Q50,40 5,50 Z" fill="none" stroke="white"/>
                </svg>
                <div><strong>ãƒ©ã‚¦ãƒ³ãƒ‰</strong><br><span class="mini">ã‚¿ãƒ¼ãƒ³ãŒã‚¹ãƒ ãƒ¼ã‚ºã€‚ã‚µã‚¤ã‚ºãŒä¸ŠãŒã£ã¦ã‚‚ç™–ãŒå°‘ãªã„ã€‚</span></div>
              </div>
              <div class="icon-card">
                <!-- Pin -->
                <svg viewBox="0 0 100 60" aria-hidden="true">
                  <path d="M5,10 C50,5 50,5 95,10 L95,50 L52,45 L48,45 L5,50 Z" fill="none" stroke="white"/>
                </svg>
                <div><strong>ãƒ”ãƒ³</strong><br><span class="mini">ã‚µã‚¤ã‚ºã®ã‚ã‚‹æ³¢ã§ã®ãƒ›ãƒ¼ãƒ«ãƒ‰æ„Ÿé‡è¦–ã€‚ãƒŸãƒƒãƒ‰/ã‚¬ãƒ³ã§æ´»èºã€‚</span></div>
              </div>
            </div>
          </div>
        </div>

        <div class="acc-item">
          <button class="acc-head">
            <strong>ãƒ¬ãƒ¼ãƒ«åšï¼ˆãƒœã‚­ã‚·ãƒ¼/ãƒ”ãƒ³ãƒï¼‰</strong>
            <span class="chev">â–¶</span>
          </button>
          <div class="acc-body">
            <p>ãƒ¬ãƒ¼ãƒ«ã¯ã€Œæµ®åŠ›æ„Ÿã¨é£Ÿã„ä»˜ãã€ã®ãƒãƒ©ãƒ³ã‚¹ã«ç›´çµã—ã¾ã™ã€‚</p>
            <ul>
              <li><strong>ãƒœã‚­ã‚·ãƒ¼ï¼ˆåšã‚ï¼‰</strong>ï¼šãƒ†ã‚¤ã‚¯ã‚ªãƒ•ãŒæ—©ãã€ãƒŸã‚¹ã«å¯›å®¹ã€‚åˆå¿ƒè€…ã€œä¸­ç´šã®æœ¬æ•°ç¢ºä¿ã«â—ã€‚</li>
              <li><strong>ãƒ”ãƒ³ãƒï¼ˆè–„ã‚ï¼‰</strong>ï¼šã‚¿ãƒ¼ãƒ³æ™‚ã®é£Ÿã„ä»˜ããŒè‰¯ã„ã€‚ä¸Šé”ã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«é‡è¦–ãªã‚‰æœ‰åŠ¹ã€‚</li>
            </ul>
          </div>
        </div>

        <div class="acc-item">
          <button class="acc-head">
            <strong>ãƒ­ãƒƒã‚«ãƒ¼ï¼ˆåã‚Šï¼‰ã®è€ƒãˆæ–¹</strong>
            <span class="chev">â–¶</span>
          </button>
          <div class="acc-body">
            <p>ãƒ­ãƒƒã‚«ãƒ¼ã¯ã€Œãƒ†ã‚¤ã‚¯ã‚ªãƒ•ã®æ—©ã•ã€ã¨ã€Œã‚¿ãƒ¼ãƒ³ã®ã‚­ãƒ¬/ãƒãƒ¼ã‚ºåˆºã•ã‚Šã«ãã•ã€ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã€‚</p>
            <ul>
              <li><strong>å¼±ã„ãƒ­ãƒƒã‚«ãƒ¼</strong>ï¼šãƒ†ã‚¤ã‚¯ã‚ªãƒ•æ—©ã„ãƒ»ç›´é€²æ€§â—ã€‚å°æ³¢ã€œãƒŸãƒ‰ãƒ«ã€åˆå¿ƒè€…ã®æœ¬æ•°ç¢ºä¿ã«ã€‚</li>
              <li><strong>å¼·ã„ãƒ­ãƒƒã‚«ãƒ¼</strong>ï¼šæ˜ã‚ŒãŸæ³¢ã§ã‚‚åˆºã•ã‚Šã«ããã€æ€¥æ¿€ãªã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œã€‚ã‚µã‚¤ã‚ºã‚ã‚‹æ³¢ã‚„ä¸Šç´šè€…å‘ã‘ã€‚</li>
            </ul>
          </div>
        </div>
      </section>
    </main>
  </section>

  <footer class="site-footer">
    <p>Â© <span id="year"></span> SEA LIFE HUB</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    /* ===============================
       æ¨å¥¨ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼šä¿‚æ•°ãƒ†ãƒ¼ãƒ–ãƒ«æ–¹å¼
       base (åˆå¿ƒè€…0.50 / ä¸­ç´š0.45 / ä¸Šç´š0.40)
       ä½“åŠ› low:+0.03 / high:-0.03
       å¥½ã¿ more:+0.02 / less:-0.02
       =============================== */
    function calcVolume(weight, level, fitness, floatPref){
      let base = (level==='beginner') ? 0.50 : (level==='advanced') ? 0.40 : 0.45;
      if(fitness==='low') base += 0.03;
      if(fitness==='high') base -= 0.03;
      if(floatPref==='more') base += 0.02;
      if(floatPref==='less') base -= 0.02;

      // å®‰å…¨ãªç¯„å›²ã«ã‚¯ãƒªãƒƒãƒ—
      base = Math.max(0.35, Math.min(0.60, base));

      const liters = Math.round(weight * base * 10)/10;
      const low = Math.round(liters * 0.9 * 10)/10;
      const high = Math.round(liters * 1.1 * 10)/10;
      return { liters, range:[low, high], factor: base };
    }

    /* ===============================
       æ¿ã‚¿ã‚¤ãƒ—æ¨å®šï¼ˆãƒ¬ãƒ™ãƒ«Ã—æ³¢Ã—ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰
       =============================== */
    function pickBoardType(level, wave, style){
      if(level === 'beginner'){
        if(style === 'maneuver' && wave !== 'small') return {type:'ãƒŸãƒƒãƒ‰ãƒ¬ãƒ³ã‚°ã‚¹', why:'å®‰å®šã¨æ“ä½œæ€§ã®ãƒãƒ©ãƒ³ã‚¹ã§ä¸Šé”ã«ç¹‹ã’ã‚„ã™ã„'};
        if(style === 'cruise') return {type:'ãƒ­ãƒ³ã‚°/ãƒŸãƒƒãƒ‰', why:'æ—©ã„ãƒ†ã‚¤ã‚¯ã‚ªãƒ•ã§ã‚†ã£ãŸã‚Šã‚¯ãƒ«ãƒ¼ã‚º'};
        return {type:'ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ‰/ãƒ•ã‚¡ãƒ³', why:'å®‰å®šï¼†æœ¬æ•°ç¢ºä¿ã€‚ã¾ãšã¯ã€Œä¹—ã‚Œã‚‹ã€ã‚’ä½“ã«å…¥ã‚Œã‚‹'};
      }
      if(level === 'intermediate'){
        if(style === 'maneuver'){
          return (wave === 'small') ? {type:'ãƒ•ã‚£ãƒƒã‚·ãƒ¥/ãƒ„ã‚¤ãƒ³å¯„ã‚Šã‚·ãƒ§ãƒ¼ãƒˆ', why:'å°æ³¢ã§ã®åŠ é€Ÿã¨å›è»¢æ€§'} :
                                      {type:'ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆ', why:'æŠ€ã¨èµ°ã‚Šã®ãƒãƒ©ãƒ³ã‚¹ã§å¿œç”¨ç¯„å›²ãŒåºƒã„'};
        }
        if(style === 'cruise') return {type:'ãƒŸãƒƒãƒ‰/ãƒ­ãƒ³ã‚°', why:'æœ¬æ•°ã¨ãƒ©ã‚¤ãƒ³å–ã‚Šã‚’é‡è¦–'};
        return {type:'ãƒŸãƒƒãƒ‰/ã‚·ãƒ§ãƒ¼ãƒˆ(ã‚„ã‚„ãƒœãƒªãƒ¥ãƒ¼ãƒ å¤šã‚)', why:'å–ã‚Šå›ã—ã¨å®‰å®šã®ä¸­åº¸'};
      }
      // ä¸Šç´š
      if(style === 'cruise') return {type:'ãƒ­ãƒ³ã‚°', why:'å¤§ãã„ãƒ©ã‚¤ãƒ³ã¨ã‚¯ãƒ«ãƒ¼ã‚ºæ„Ÿ'};
      return (wave === 'small') ? {type:'ãƒã‚¤ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚·ãƒ§ãƒ¼ãƒˆ/ãƒ•ã‚£ãƒƒã‚·ãƒ¥', why:'å°æ³¢ã§ã‚‚æ¨é€²åŠ›ã¨ãƒ‰ãƒ©ã‚¤ãƒ–'} :
                                  {type:'HPã‚·ãƒ§ãƒ¼ãƒˆ', why:'ã‚µã‚¤ã‚ºãŒã‚ã‚‹æ³¢ã§ã®æ©Ÿå‹•æ€§ã¨æ€§èƒ½'};
    }

    /* ===============================
       æ¨å¥¨ã®é•·ã•/å¹…/åšã¿ï¼ˆtype Ã— weight Ã— waveã§ç›®å®‰ï¼‰
       åŸºæœ¬ãƒ¬ãƒ³ã‚¸ã‚’ã‚¿ã‚¤ãƒ—ã”ã¨ã«å®šç¾©ã—ã€ä½“é‡ãƒã‚±ãƒƒãƒˆ/æ³¢ã§å¾®èª¿æ•´
       =============================== */
    const sizeTable = {
      'ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ‰/ãƒ•ã‚¡ãƒ³':   { len:[7.0, 8.0],   wid:[21.0, 23.0], thick:[2.75, 3.3] },
      'ãƒŸãƒƒãƒ‰ãƒ¬ãƒ³ã‚°ã‚¹':        { len:[6.8, 7.6],   wid:[20.5, 22.5], thick:[2.6, 3.0] },
      'ãƒ­ãƒ³ã‚°/ãƒŸãƒƒãƒ‰':         { len:[9.0, 9.6],   wid:[22.5, 23.5], thick:[2.75, 3.25] },
      'ãƒ•ã‚£ãƒƒã‚·ãƒ¥/ãƒ„ã‚¤ãƒ³å¯„ã‚Šã‚·ãƒ§ãƒ¼ãƒˆ': { len:[5.4, 6.0], wid:[19.5, 21.5], thick:[2.4, 2.7] },
      'ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆ': { len:[5.10, 6.4], wid:[18.5, 20.5], thick:[2.3, 2.6] },
      'ãƒŸãƒƒãƒ‰/ã‚·ãƒ§ãƒ¼ãƒˆ(ã‚„ã‚„ãƒœãƒªãƒ¥ãƒ¼ãƒ å¤šã‚)': { len:[6.0, 6.6], wid:[19.5, 21.5], thick:[2.5, 2.8] },
      'ãƒã‚¤ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚·ãƒ§ãƒ¼ãƒˆ/ãƒ•ã‚£ãƒƒã‚·ãƒ¥': { len:[5.8, 6.4], wid:[19.5, 21.5], thick:[2.5, 2.8] },
      'HPã‚·ãƒ§ãƒ¼ãƒˆ':            { len:[5.8, 6.2],  wid:[18.0, 19.5], thick:[2.25, 2.5] },
      'ãƒ­ãƒ³ã‚°':                { len:[9.0, 9.6],  wid:[22.5, 23.5], thick:[2.75, 3.25] }
    };

    function adjustByWeightAndWave(base, weight, wave){
      // ä½“é‡ãƒã‚±ãƒƒãƒˆ
      const bucket = (weight<55)? -1 : (weight<=75)? 0 : 1; // -1:è»½ã„, 0:ä¸­é–“, 1:é‡ã„
      const waveAdj = (wave==='small')? +0.0 : (wave==='mid')? +0.05 : +0.1; // ã‚µã‚¤ã‚ºã‚ã‚‹ã»ã©é•·/åšå´ã¸

      function lerpRange([min,max], k){ return [ +(min + (max-min)*k).toFixed(2), +(max + (max-min)*k).toFixed(2) ]; }
      function shiftRange([min,max], delta){ return [ +(min+delta).toFixed(2), +(max+delta).toFixed(2) ]; }

      // ãƒã‚±ãƒƒãƒˆä¿‚æ•°ï¼ˆè»½ã„ï¼š-0.05ã€é‡ã„ï¼š+0.05ï¼‰
      const k = (bucket===-1)? -0.05 : (bucket===1)? 0.05 : 0;
      let len  = lerpRange(base.len, k + waveAdj*0.3);
      let wid  = lerpRange(base.wid, k*0.8 + waveAdj*0.2);
      let thk  = lerpRange(base.thick, k + waveAdj*0.4);

      // å°æ•°â†’ãƒ•ã‚£ãƒ¼ãƒˆã‚¤ãƒ³ãƒè¡¨è¨˜ç”¨ã«ä¿æŒ
      return { len, wid, thk };
    }

    function toFeetInches(val){
      const feet = Math.floor(val);
      const inches = Math.round((val - feet) * 12);
      return `${feet}'${inches}"`;
    }
    function rangeFeetInches([a,b]){ return `${toFeetInches(a)} ã€œ ${toFeetInches(b)}`; }
    function rangeCm([a,b]){ return `${Math.round(a*30.48)}ã€œ${Math.round(b*30.48)}cm`; } // 1ft=30.48cm
    function rangeInch([a,b]){ return `${a.toFixed(2)}ã€œ${b.toFixed(2)}"`; }

    /* ===============================
       ãƒ•ã‚£ãƒ³æ¨å¥¨ï¼ˆç°¡æ˜“ï¼‰
       =============================== */
    function suggestFins(type){
      if(type.includes('ãƒ­ãƒ³ã‚°')) return {fins:'ã‚·ãƒ³ã‚°ãƒ«ä¸­å¿ƒï¼ˆ2+1ã‚‚å¯ï¼‰', note:'ç›´é€²å®‰å®šã¨å¤§ãã„ãƒ©ã‚¤ãƒ³'};
      if(type.includes('ãƒ•ã‚£ãƒƒã‚·ãƒ¥') || type.includes('ãƒ„ã‚¤ãƒ³')) return {fins:'ãƒ„ã‚¤ãƒ³ or ã‚¯ãƒ¯ãƒƒãƒ‰', note:'å›è»¢æ€§/åŠ é€Ÿã‚’é‡è¦–'};
      if(type.includes('ã‚½ãƒ•ãƒˆ') || type.includes('ãƒ•ã‚¡ãƒ³') || type.includes('ãƒŸãƒƒãƒ‰')) return {fins:'ãƒˆãƒ©ã‚¤', note:'æ±ç”¨ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚„ã™ã„'};
      return {fins:'ãƒˆãƒ©ã‚¤', note:'æœ€ã‚‚ãƒãƒ”ãƒ¥ãƒ©ãƒ¼'};
    }

    /* ===============================
       è¨ºæ–­ãƒ¡ã‚¤ãƒ³
       =============================== */
    function diagnose(){
      const weight = Number(document.getElementById('weight').value || 0);
      const level = document.getElementById('level').value;
      const wave = document.getElementById('wave').value;
      const style = document.getElementById('style').value;
      const fitness = document.getElementById('fitness').value;
      const floatPref = document.getElementById('floatPref').value;

      if(!weight || weight < 35){
        alert('ä½“é‡(kg)ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return;
      }

      const vol = calcVolume(weight, level, fitness, floatPref);
      const board = pickBoardType(level, wave, style);
      const base = sizeTable[board.type] || sizeTable['ãƒŸãƒƒãƒ‰ãƒ¬ãƒ³ã‚°ã‚¹'];
      const sized = adjustByWeightAndWave(base, weight, wave);
      const fins = suggestFins(board.type);

      const img = (board.type.includes('ãƒ­ãƒ³ã‚°')) ? 'images/stays.jpg'
                : (board.type.includes('ãƒŸãƒƒãƒ‰')) ? 'images/diagnosis.jpg'
                : 'images/apparel.jpg';

      // è¡¨ã¨ã‚«ãƒ¼ãƒ‰ã‚’ä¸¦ã¹ã¦è¡¨ç¤º
      const html = `
        <div class="grid">
          <article class="card">
            <img src="${img}" alt="${board.type}">
            <div class="card-body">
              <h3>${board.type}</h3>
              <p>${board.why}</p>
              <p><strong>æ¨å¥¨ãƒ•ã‚£ãƒ³æ§‹æˆï¼š</strong>${fins.fins}ï¼ˆ${fins.note}ï¼‰</p>
              <div class="cta-row">
                <a class="btn link" target="_blank" href="https://www.amazon.co.jp/s?k=${encodeURIComponent('ã‚µãƒ¼ãƒ•ãƒœãƒ¼ãƒ‰ ' + board.type)}">Amazonã§æ¢ã™</a>
                <a class="btn link" target="_blank" href="https://search.rakuten.co.jp/search/mall/${encodeURIComponent(board.type)}">æ¥½å¤©ã§æ¢ã™</a>
              </div>
            </div>
          </article>

          <div>
            <table class="table">
              <thead><tr><th>é …ç›®</th><th>æ¨å¥¨å€¤ï¼ˆç›®å®‰ï¼‰</th></tr></thead>
              <tbody>
                <tr><td>ä½“é‡</td><td>${weight} kg</td></tr>
                <tr><td>æ¨å¥¨ãƒœãƒªãƒ¥ãƒ¼ãƒ </td><td><strong>${vol.liters}â„“</strong>ï¼ˆç´„${vol.range[0]}ã€œ${vol.range[1]}â„“ï¼‰ <span class="mini">ä¿‚æ•°:${vol.factor.toFixed(2)}</span></td></tr>
                <tr><td>é•·ã•</td><td>${rangeFeetInches(sized.len)} <span class="mini">ï¼ˆ${rangeCm(sized.len)}ï¼‰</span></td></tr>
                <tr><td>å¹…</td><td>${rangeInch(sized.wid)}</td></tr>
                <tr><td>åšã¿</td><td>${rangeInch(sized.thk)}</td></tr>
              </tbody>
            </table>

            <div class="row mini" style="margin-top:10px;">
              <span class="badge">è£œè¶³</span>
              <span>ã‚¦ã‚§ãƒƒãƒˆã‚¹ãƒ¼ãƒ„ã®åšã•ãƒ»æµ·æ°´å¯†åº¦ãƒ»ç­‹åŠ›ãƒ»ãƒ†ã‚¤ã‚¯ã‚ªãƒ•æŠ€è¡“ã§å‰å¾Œã—ã¾ã™ã€‚ã‚·ãƒ§ãƒƒãƒ—ã®å®Ÿæ¸¬å€¤ã‚‚ç¢ºèªã‚’ã€‚</span>
            </div>
          </div>
        </div>
      `;
      document.getElementById('result').innerHTML = html;
      window.scrollTo({ top: document.getElementById('result').offsetTop - 20, behavior: 'smooth' });
    }

    /* ===============================
       ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼ˆå­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼‰
       =============================== */
    document.querySelectorAll('.acc-head').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        btn.parentElement.classList.toggle('open');
      });
    });

    /* ===============================
       å…±é€šï¼šãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ & ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³
       =============================== */
    (function(){
      const body = document.body;
      const burger = document.querySelector('.hamburger');
      const mobileNav = document.getElementById('mobileNav');
      const backdrop = document.getElementById('backdrop');
      const deskDropdown = document.querySelector('.dropdown');
      const deskBtn = deskDropdown?.querySelector('.dropbtn');

      const closeMobile = () => { body.classList.remove('nav-open'); burger?.setAttribute('aria-expanded','false'); };
      burger?.addEventListener('click', (e) => {
        e.stopPropagation();
        const willOpen = !body.classList.contains('nav-open');
        document.querySelectorAll('.dropdown.open').forEach(d => d.classList.remove('open'));
        if (willOpen) { body.classList.add('nav-open'); burger.setAttribute('aria-expanded','true'); }
        else { closeMobile(); }
      });
      backdrop?.addEventListener('click', closeMobile);
      mobileNav?.addEventListener('click', (e) => { if (e.target.tagName === 'A') closeMobile(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMobile(); });

      if (deskDropdown && deskBtn) {
        const closeAll = () => deskDropdown.classList.remove('open');
        deskBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const willOpen = !deskDropdown.classList.contains('open');
          document.querySelectorAll('.dropdown.open').forEach(d => d.classList.remove('open'));
          if (willOpen) deskDropdown.classList.add('open'); else closeAll();
        });
        document.addEventListener('click', (e) => { if (!deskDropdown.contains(e.target)) deskDropdown.classList.remove('open'); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') deskDropdown.classList.remove('open'); });
      }
    })();
  </script>
</body>
</html>
